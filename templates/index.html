<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FastAPI Todo App</title>
    <link rel="stylesheet" href="/static/css/styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div id="app">
        <!-- Loading Screen -->
        <div id="loading-screen" class="loading-screen">
            <div class="loading-spinner"></div>
            <p>Loading...</p>
        </div>

        <!-- Authentication Section -->
        <div id="auth-section" class="auth-section">
            <div class="auth-container">
                <div class="auth-header">
                    <h1><i class="fas fa-tasks"></i> FastAPI Todo App</h1>
                    <p>Manage your tasks efficiently</p>
                </div>
                
                <!-- Login Form -->
                <div id="login-form" class="auth-form active">
                    <h2>Login</h2>
                    <form id="loginForm">
                        <div class="input-group">
                            <i class="fas fa-user"></i>
                            <input type="text" id="loginUsername" placeholder="Username" required>
                        </div>
                        <div class="input-group">
                            <i class="fas fa-lock"></i>
                            <input type="password" id="loginPassword" placeholder="Password" required>
                        </div>
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-sign-in-alt"></i> Login
                        </button>
                    </form>
                    <p class="auth-switch">
                        Don't have an account? 
                        <a href="#" id="showRegister">Register here</a>
                    </p>
                </div>

                <!-- Register Form -->
                <div id="register-form" class="auth-form">
                    <h2>Register</h2>
                    <form id="registerForm">
                        <div class="input-group">
                            <i class="fas fa-user"></i>
                            <input type="text" id="regUsername" placeholder="Username" required>
                        </div>
                        <div class="input-group">
                            <i class="fas fa-envelope"></i>
                            <input type="email" id="regEmail" placeholder="Email" required>
                        </div>
                        <div class="input-group">
                            <i class="fas fa-user-circle"></i>
                            <input type="text" id="regFirstName" placeholder="First Name" required>
                        </div>
                        <div class="input-group">
                            <i class="fas fa-user-circle"></i>
                            <input type="text" id="regLastName" placeholder="Last Name" required>
                        </div>
                        <div class="input-group">
                            <i class="fas fa-phone"></i>
                            <input type="tel" id="regPhone" placeholder="Phone Number" required>
                        </div>
                        <div class="input-group">
                            <i class="fas fa-lock"></i>
                            <input type="password" id="regPassword" placeholder="Password" required>
                        </div>
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-user-plus"></i> Register
                        </button>
                    </form>
                    <p class="auth-switch">
                        Already have an account? 
                        <a href="#" id="showLogin">Login here</a>
                    </p>
                </div>
            </div>
        </div>

        <!-- Main Application -->
        <div id="main-app" class="main-app">
            <!-- Header -->
            <header class="app-header">
                <div class="header-content">
                    <h1><i class="fas fa-tasks"></i> My Todo App</h1>
                    <div class="user-menu">
                        <span id="username-display" class="username"></span>
                        <div class="dropdown">
                            <button class="dropdown-btn">
                                <i class="fas fa-user-circle"></i>
                                <i class="fas fa-chevron-down"></i>
                            </button>
                            <div class="dropdown-content">
                                <a href="#" id="profile-btn">
                                    <i class="fas fa-user"></i> Profile
                                </a>
                                <a href="#" id="admin-panel-btn" style="display: none;">
                                    <i class="fas fa-cog"></i> Admin Panel
                                </a>
                                <a href="#" id="logout-btn">
                                    <i class="fas fa-sign-out-alt"></i> Logout
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Main Content -->
            <main class="main-content">
                <!-- Todo Section -->
                <div id="todo-section" class="section active">
                    <div class="section-header">
                        <h2><i class="fas fa-list"></i> My Tasks</h2>
                        <button id="add-todo-btn" class="btn-primary">
                            <i class="fas fa-plus"></i> Add Task
                        </button>
                    </div>

                    <!-- Todo Stats -->
                    <div class="todo-stats">
                        <div class="stat-card">
                            <i class="fas fa-tasks"></i>
                            <div>
                                <h3 id="total-todos">0</h3>
                                <p>Total Tasks</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-check-circle"></i>
                            <div>
                                <h3 id="completed-todos">0</h3>
                                <p>Completed</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-clock"></i>
                            <div>
                                <h3 id="pending-todos">0</h3>
                                <p>Pending</p>
                            </div>
                        </div>
                    </div>

                    <!-- Todo Filters -->
                    <div class="todo-filters">
                        <button class="filter-btn active" data-filter="all">All</button>
                        <button class="filter-btn" data-filter="pending">Pending</button>
                        <button class="filter-btn" data-filter="completed">Completed</button>
                        <button class="filter-btn" data-filter="high">High Priority</button>
                    </div>

                    <!-- Todo List -->
                    <div id="todo-list" class="todo-list">
                        <div class="empty-state" id="empty-todos">
                            <i class="fas fa-clipboard-list"></i>
                            <h3>No tasks yet</h3>
                            <p>Create your first task to get started!</p>
                        </div>
                    </div>
                </div>

                <!-- Profile Section -->
                <div id="profile-section" class="section">
                    <div class="section-header">
                        <h2><i class="fas fa-user"></i> Profile</h2>
                    </div>
                    <div class="profile-content">
                        <div class="profile-info">
                            <div class="profile-avatar">
                                <i class="fas fa-user-circle"></i>
                            </div>
                            <div class="profile-details">
                                <h3 id="profile-name"></h3>
                                <p id="profile-email"></p>
                                <p id="profile-phone"></p>
                            </div>
                        </div>
                        
                        <div class="profile-actions">
                            <button id="change-password-btn" class="btn-secondary">
                                <i class="fas fa-key"></i> Change Password
                            </button>
                            <button id="change-phone-btn" class="btn-secondary">
                                <i class="fas fa-phone"></i> Change Phone
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Admin Section -->
                <div id="admin-section" class="section">
                    <div class="section-header">
                        <h2><i class="fas fa-cog"></i> Admin Panel</h2>
                    </div>
                    <div class="admin-content">
                        <div class="admin-stats">
                            <div class="stat-card">
                                <i class="fas fa-users"></i>
                                <div>
                                    <h3 id="admin-total-todos">0</h3>
                                    <p>All User Tasks</p>
                                </div>
                            </div>
                        </div>
                        <div id="admin-todo-list" class="todo-list">
                            <div class="empty-state" id="empty-admin-todos">
                                <i class="fas fa-clipboard-list"></i>
                                <h3>No tasks in system</h3>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- Modals -->
        <!-- Add/Edit Todo Modal -->
        <div id="todo-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="todo-modal-title">Add New Task</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <form id="todo-form">
                    <div class="input-group">
                        <label for="todoTitle">Title *</label>
                        <input type="text" id="todoTitle" required>
                    </div>
                    <div class="input-group">
                        <label for="todoDescription">Description *</label>
                        <textarea id="todoDescription" rows="3" required></textarea>
                    </div>
                    <div class="input-group">
                        <label for="todoPriority">Priority *</label>
                        <select id="todoPriority" required>
                            <option value="1">Low Priority</option>
                            <option value="2">Medium Priority</option>
                            <option value="3">High Priority</option>
                            <option value="4">Urgent</option>
                            <option value="5">Critical</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="cancel-todo">Cancel</button>
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-save"></i> Save Task
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Change Password Modal -->
        <div id="password-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Change Password</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <form id="password-form">
                    <div class="input-group">
                        <label for="oldPassword">Current Password</label>
                        <input type="password" id="oldPassword" required>
                    </div>
                    <div class="input-group">
                        <label for="newPassword">New Password</label>
                        <input type="password" id="newPassword" required>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="cancel-password">Cancel</button>
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-save"></i> Update Password
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Change Phone Modal -->
        <div id="phone-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Change Phone Number</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <form id="phone-form">
                    <div class="input-group">
                        <label for="newPhone">New Phone Number</label>
                        <input type="tel" id="newPhone" required>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="cancel-phone">Cancel</button>
                        <button type="submit" class="btn-primary">
                            <i class="fas fa-save"></i> Update Phone
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Navigation -->
        <nav class="bottom-nav">
            <button class="nav-btn active" data-section="todo-section">
                <i class="fas fa-list"></i>
                <span>Tasks</span>
            </button>
            <button class="nav-btn" data-section="profile-section">
                <i class="fas fa-user"></i>
                <span>Profile</span>
            </button>
            <button class="nav-btn" id="admin-nav-btn" data-section="admin-section" style="display: none;">
                <i class="fas fa-cog"></i>
                <span>Admin</span>
            </button>
        </nav>

        <!-- Notifications -->
        <div id="notification-container"></div>
    </div>

    <script src="/static/js/app.js"></script>
</body>
</html>
